{% extends 'component/base.html' %}

{% block title %}CodeWe - {{ document['document_id'] }}{% endblock %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="/css/editor.less">
    <link rel="stylesheet" type="text/css" href="/css/rainbow.less">
{% endblock %}

{% block header %}
    <h1><span class="title-1">C</span><span class="title-2">ODE</span><span class="title-1">W</span><span class="title-2">E</span> - {{ document['document_id'] }}</h1>
    <div id="actions">
        <a id="download" target="iframe" download="{{ document['document_id'] }}.py" href="#">Download</a>
    </div>
{% endblock %}

{% block corps %}
    <section id="editor" contenteditable="true" spellcheck="false">
        {% for line in document['content'] %}
            <div uuid="{{ line['uuid'] }}">{{ line['content'] }}<br></div>
        {% endfor %}
    </section>
    <nav id="customise">
        <ul>
            <li>
                <h3>Language</h3>
                <select name="language" id="option-language">
                </select>
            </li>
            <li>
                <h3>Space Size</h3>
                <input id="option-space-size" type="number" value="4" min="1" max="32" />
            </li>
            <li>
                <h3>QR Code</h3>
                <br />
                <div id="qrcode"></div>
            </li>
        </ul>
    </nav>
{% endblock %}

{% block scripts %}
    <script>
      let doc_id = "{{ document['document_id'] }}" ;
      let language = "{{ document['language'] }}" || "generic" ;
    </script>
    {% if production %}
        <script type="application/javascript" src="/js/dist/editor.min.js"></script>
    {% else %}
        <script type="module" src="/js/dev/page/editor.js"></script>
    {% endif %}
    <script type="application/javascript" src = "/js/dev/lib/qrcode.min.js">
    </script>
    <script>
        const qrcode = new QRCode(document.getElementById("qrcode"), {
            text: document.documentURI,
            width: 128,
            height: 128,
            colorDark : "#000000",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });
    </script>
{% endblock %}
